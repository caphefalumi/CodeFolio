import{_ as M,C as q,g as m,o as _,w as s,a as t,r as o,d as l,b as i,i as C,h as G,t as S,f as N}from"./index-BKtgFQIQ.js";const T={components:{GoogleLogin:q},data(){return{loading:!1,errorMessage:"",form:{email:"",password:""},rules:{required:r=>!!r||"This field is required",email:r=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(r)||"Email must be valid"}}},methods:{async handleLogin(){this.loading=!0,this.errorMessage="";try{const r=await N.post("/api/users/login/jwt",{email:this.form.email,password:this.form.password},{withCredentials:!0});console.log(r.data),sessionStorage.setItem("accessToken",r.data.accessToken),this.$router.push("/")}catch(r){console.error("Login error:",r),r.response&&r.response.status===401?this.errorMessage="Invalid email or password":this.errorMessage="Something went wrong. Please try again"}finally{this.loading=!1}},async handleGoogleLogin(r){}}},B={class:"text-center"},j={class:"text-center mt-4"};function D(r,e,E,I,n,d){const u=o("v-card-title"),c=o("v-text-field"),p=o("v-icon"),f=o("v-alert"),g=o("v-btn"),v=o("v-form"),w=o("v-divider"),b=o("GoogleLogin"),y=o("router-link"),x=o("v-card-text"),h=o("v-card"),k=o("v-col"),L=o("v-row"),V=o("v-container");return _(),m(V,null,{default:s(()=>[t(L,{justify:"center"},{default:s(()=>[t(k,{cols:"12",sm:"8",md:"6"},{default:s(()=>[t(h,{class:"mt-8"},{default:s(()=>[t(u,{class:"text-h4 text-center pt-6"},{default:s(()=>e[2]||(e[2]=[l(" Login ")])),_:1,__:[2]}),t(x,null,{default:s(()=>[t(v,{onSubmit:C(d.handleLogin,["prevent"])},{default:s(()=>[t(c,{modelValue:n.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>n.form.email=a),label:"Email",type:"email",required:"",rules:[n.rules.required,n.rules.email]},null,8,["modelValue","rules"]),t(c,{modelValue:n.form.password,"onUpdate:modelValue":e[1]||(e[1]=a=>n.form.password=a),label:"Password",type:"password",required:"",rules:[n.rules.required]},null,8,["modelValue","rules"]),n.errorMessage?(_(),m(f,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:s(()=>[t(p,{color:"error",size:"24"},{default:s(()=>e[3]||(e[3]=[l("mdi-alert-circle")])),_:1,__:[3]})]),default:s(()=>[l(" "+S(n.errorMessage),1)]),_:1})):G("",!0),t(g,{type:"submit",color:"primary",block:"",class:"mt-4",loading:n.loading},{default:s(()=>e[4]||(e[4]=[l("Login")])),_:1,__:[4]},8,["loading"])]),_:1},8,["onSubmit"]),t(w,{class:"my-4"}),i("div",B,[e[5]||(e[5]=i("p",{class:"text-body-2 mb-2"},"Or login with",-1)),t(b,{callback:d.handleGoogleLogin,prompt:"","auto-login":""},null,8,["callback"])]),i("div",j,[t(y,{to:"/register",class:"text-decoration-none"},{default:s(()=>e[6]||(e[6]=[l(" Don't have an account? Register ")])),_:1,__:[6]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const U=M(T,[["render",D]]);export{U as default};
