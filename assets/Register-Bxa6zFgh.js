import{j as k,k as S,g as q,o as C,w as a,a as t,r,d as u,b as m,i as N,u as O,C as j,l as R,m as T}from"./index-C0AuJ_IX.js";const E={class:"text-center"},G={class:"text-center mt-4"},U={__name:"Register",setup(J){const p=T(),c=k(!1),s=S({email:"",password:"",confirmPassword:""}),n={required:o=>!!o||"This field is required",email:o=>/.+@.+\..+/.test(o)||"Email must be valid",password:o=>o.length>=8||"Password must be at least 8 characters",confirmPassword:o=>o===s.password||"Passwords must match"},_=async()=>{c.value=!0;try{const o=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password})});if(!o.ok)throw new Error("Registration failed");const e=await o.json();localStorage.setItem("user",JSON.stringify(e)),p.push("/")}catch(o){console.error("Registration error:",o)}finally{c.value=!1}},f=async o=>{const e=R(o.credential);console.log("Google user data:",e);try{const l=await fetch("/auth/google/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok)throw new Error("Google registration failed");const i=await l.json();localStorage.setItem("user",JSON.stringify(i)),p.push("/")}catch(l){console.error("Google registration error:",l)}};return(o,e)=>{const l=r("v-card-title"),i=r("v-text-field"),w=r("v-btn"),g=r("v-form"),v=r("v-divider"),y=r("router-link"),b=r("v-card-text"),h=r("v-card"),x=r("v-col"),V=r("v-row"),P=r("v-container");return C(),q(P,null,{default:a(()=>[t(V,{justify:"center"},{default:a(()=>[t(x,{cols:"12",sm:"8",md:"6"},{default:a(()=>[t(h,{class:"mt-8"},{default:a(()=>[t(l,{class:"text-h4 text-center pt-6"},{default:a(()=>e[3]||(e[3]=[u(" Create Account ")])),_:1,__:[3]}),t(b,null,{default:a(()=>[t(g,{onSubmit:N(_,["prevent"])},{default:a(()=>[t(i,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=d=>s.email=d),label:"Email",type:"email",required:"",rules:[n.required,n.email]},null,8,["modelValue","rules"]),t(i,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=d=>s.password=d),label:"Password",type:"password",required:"",rules:[n.required,n.password]},null,8,["modelValue","rules"]),t(i,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>s.confirmPassword=d),label:"Confirm Password",type:"password",required:"",rules:[n.required,n.confirmPassword]},null,8,["modelValue","rules"]),t(w,{type:"submit",color:"primary",block:"",class:"mt-4",loading:c.value},{default:a(()=>e[4]||(e[4]=[u(" Register ")])),_:1,__:[4]},8,["loading"])]),_:1}),t(v,{class:"my-4"}),m("div",E,[e[5]||(e[5]=m("p",{class:"text-body-2 mb-2"},"Or register with",-1)),t(O(j),{callback:f,prompt:"","auto-login":""})]),m("div",G,[t(y,{to:"/login",class:"text-decoration-none"},{default:a(()=>e[6]||(e[6]=[u(" Already have an account? Login ")])),_:1,__:[6]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{U as default};
