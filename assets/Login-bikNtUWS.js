import{_ as M,C as S,g as u,o as g,w as t,a as o,r as s,d as l,b as i,i as T,h as q,t as C,f as p}from"./index-By7QdvHP.js";const N={components:{GoogleLogin:S},data(){return{loading:!1,errorMessage:"",form:{email:"",password:""},rules:{required:r=>!!r||"This field is required",email:r=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(r)||"Email must be valid"}}},methods:{async handleLogin(){this.loading=!0,this.errorMessage="";try{const r=await p.post("/api/users/login/jwt",{email:this.form.email,password:this.form.password},{withCredentials:!0});console.log(r.data),sessionStorage.setItem("accessToken",r.data.accessToken),this.$router.push("/")}catch(r){console.error("Login error:",r),r.response&&r.response.status===401?this.errorMessage="Invalid email or password":this.errorMessage="Something went wrong. Please try again"}finally{this.loading=!1}},async handleGoogleLogin(r){p.post("/api/users/login/google",{token:r.access_token}).then(e=>{console.log(e.data),sessionStorage.setItem("accessToken",e.data.accessToken),this.$router.push("/")}).catch(e=>{console.error("Google login error:",e),this.errorMessage="Google login failed. Please try again"})}}},E={class:"text-center"},I={class:"text-center mt-4"};function B(r,e,P,j,n,c){const f=s("v-card-title"),d=s("v-text-field"),m=s("v-icon"),v=s("v-alert"),_=s("v-btn"),w=s("v-form"),b=s("v-divider"),y=s("GoogleLogin"),h=s("router-link"),k=s("v-card-text"),x=s("v-card"),L=s("v-col"),V=s("v-row"),G=s("v-container");return g(),u(G,null,{default:t(()=>[o(V,{justify:"center"},{default:t(()=>[o(L,{cols:"12",sm:"8",md:"6"},{default:t(()=>[o(x,{class:"mt-8"},{default:t(()=>[o(f,{class:"text-h4 text-center pt-6"},{default:t(()=>e[2]||(e[2]=[l(" Login ")])),_:1,__:[2]}),o(k,null,{default:t(()=>[o(w,{onSubmit:T(c.handleLogin,["prevent"])},{default:t(()=>[o(d,{modelValue:n.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>n.form.email=a),label:"Email",type:"email",required:"",rules:[n.rules.required,n.rules.email]},null,8,["modelValue","rules"]),o(d,{modelValue:n.form.password,"onUpdate:modelValue":e[1]||(e[1]=a=>n.form.password=a),label:"Password",type:"password",required:"",rules:[n.rules.required]},null,8,["modelValue","rules"]),n.errorMessage?(g(),u(v,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:t(()=>[o(m,{color:"error",size:"24"},{default:t(()=>e[3]||(e[3]=[l("mdi-alert-circle")])),_:1,__:[3]})]),default:t(()=>[l(" "+C(n.errorMessage),1)]),_:1})):q("",!0),o(_,{type:"submit",color:"primary",block:"",class:"mt-4",loading:n.loading},{default:t(()=>e[4]||(e[4]=[l("Login")])),_:1,__:[4]},8,["loading"])]),_:1},8,["onSubmit"]),o(b,{class:"my-4"}),i("div",E,[e[6]||(e[6]=i("p",{class:"text-body-2 mb-2"},"Or login with",-1)),o(y,{callback:c.handleGoogleLogin,prompt:"","auto-login":"","popup-type":"TOKEN"},{default:t(()=>[o(_,{class:"google-btn",block:"",elevation:"1"},{default:t(()=>[o(m,{left:"",class:"me-2 google-icon",color:"#EA4335"}),e[5]||(e[5]=l(" Sign in with Google "))]),_:1,__:[5]})]),_:1},8,["callback"])]),i("div",I,[o(h,{to:"/register",class:"text-decoration-none"},{default:t(()=>e[7]||(e[7]=[l(" Don't have an account? Register ")])),_:1,__:[7]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const O=M(N,[["render",B],["__scopeId","data-v-ebda6ac3"]]);export{O as default};
