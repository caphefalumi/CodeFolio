import{_ as j,c as h,o as d,a as s,w as l,b as u,f as _,g as S,r,h as z,F as b,i as V,d as c,t as p,e as y,j as E}from"./index-7451yhR1.js";const O={name:"ProjectsView",data(){return{projects:[],search:"",selectedType:"all",sortBy:"newest",page:1,itemsPerPage:6,projectTypes:[{title:"All Types",value:"all"},{title:"Web App",value:"web"},{title:"Mobile App",value:"mobile"},{title:"Game",value:"game"},{title:"Design",value:"design"}],sortOptions:[{title:"Newest First",value:"newest"},{title:"Most Liked",value:"liked"},{title:"Most Viewed",value:"viewed"}],errorMessage:""}},computed:{filteredProjects(){let t=this.projects;if(this.selectedType!=="all"&&(t=t.filter(e=>e.type===this.selectedType)),this.search)if(this.search.startsWith("#")){const e=this.search.slice(1).toLowerCase();t=t.filter(a=>Array.isArray(a.tags)&&a.tags.some(n=>n.toLowerCase().includes(e)))}else t=t.filter(e=>{var a;return e.title.toLowerCase().includes(this.search.toLowerCase())||((a=e.description)==null?void 0:a.toLowerCase().includes(this.search.toLowerCase()))});return this.sortBy==="newest"?t=t.sort((e,a)=>new Date(a.createdAt)-new Date(e.createdAt)):this.sortBy==="liked"?t=t.sort((e,a)=>(a.upvotes||0)-(e.upvotes||0)):this.sortBy==="viewed"&&(t=t.sort((e,a)=>(a.views||0)-(e.views||0))),t},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)},paginatedProjects(){const t=(this.page-1)*this.itemsPerPage;return this.filteredProjects.slice(t,t+this.itemsPerPage)}},methods:{async toggleLike(t){var e,a;try{if(t.liked){const n=await y.post(`/api/posts/${t._id}/downvote`);t.downvotes=n.data.downvotes,t.liked=!1}else{const n=await y.post(`/api/posts/${t._id}/upvote`);t.upvotes=n.data.upvotes,t.liked=!0}}catch(n){this.errorMessage=((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||n.message||"Failed to update vote. Please try again."}},async handleCreatePost(){this.errorMessage="",this.loading=!0,this.loading=!1}},async mounted(){try{const t=await y.get("/api/posts/");this.projects=t.data,console.log("Projects:",this.projects)}catch(t){console.error("Error fetching projects:",t)}}};function W(t,e,a,n,i,v){const x=r("v-text-field"),m=r("v-col"),w=r("v-select"),f=r("v-row"),C=r("v-card-title"),B=r("v-chip"),L=r("v-card-text"),P=r("v-btn"),M=r("v-spacer"),k=r("v-icon"),T=r("v-card-actions"),A=r("v-card"),D=r("v-pagination"),F=r("v-alert"),N=r("v-container"),U=E("auto-animate");return d(),h("div",null,[s(N,null,{default:l(()=>[u("section",null,[s(f,{class:"mb-6"},{default:l(()=>[s(m,{cols:"12",md:"6"},{default:l(()=>[s(x,{modelValue:i.search,"onUpdate:modelValue":e[0]||(e[0]=o=>i.search=o),label:"Search projects","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(m,{cols:"12",md:"3"},{default:l(()=>[s(w,{modelValue:i.selectedType,"onUpdate:modelValue":e[1]||(e[1]=o=>i.selectedType=o),items:i.projectTypes,"item-title":"title","item-value":"value",label:"Project Type",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),s(m,{cols:"12",md:"3"},{default:l(()=>[s(w,{modelValue:i.sortBy,"onUpdate:modelValue":e[2]||(e[2]=o=>i.sortBy=o),items:i.sortOptions,"item-title":"title","item-value":"value",label:"Sort By",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),u("section",null,[z((d(),_(f,null,{default:l(()=>[(d(!0),h(b,null,V(v.paginatedProjects,o=>(d(),_(m,{key:o._id,cols:"12",md:"4"},{default:l(()=>[u("article",null,[s(A,null,{default:l(()=>[s(C,null,{default:l(()=>[c(p(o.title),1)]),_:2},1024),s(L,null,{default:l(()=>[u("p",null,p(o.description),1),u("div",null,[(d(!0),h(b,null,V(o.tags,g=>(d(),_(B,{key:g,class:"mr-2 mb-2",size:"small"},{default:l(()=>[c(p(g),1)]),_:2},1024))),128))])]),_:2},1024),s(T,null,{default:l(()=>[s(P,{color:"primary",variant:"text",to:`${o.getFullPath}`,"prepend-icon":"mdi-eye"},{default:l(()=>e[4]||(e[4]=[c(" View Project ")])),_:2,__:[4]},1032,["to"]),s(M),e[5]||(e[5]=c()),s(P,{icon:"",onClick:g=>v.toggleLike(o),"aria-label":`${o.liked?"Unlike":"Like"} project: ${o.title}`},{default:l(()=>[s(k,{"aria-hidden":"true"},{default:l(()=>[c(p(o.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1024)]),_:2},1032,["onClick","aria-label"])]),_:2,__:[5]},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})),[[U]])]),u("section",null,[s(f,{class:"mt-6"},{default:l(()=>[s(m,{cols:"12",class:"text-center"},{default:l(()=>[s(D,{modelValue:i.page,"onUpdate:modelValue":e[3]||(e[3]=o=>i.page=o),length:v.totalPages,rounded:""},null,8,["modelValue","length"])]),_:1})]),_:1})]),i.errorMessage?(d(),_(F,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"},role:"alert","aria-live":"polite"},{prepend:l(()=>[s(k,{color:"error",size:"24","aria-hidden":"true"},{default:l(()=>e[6]||(e[6]=[c("mdi-alert-circle")])),_:1,__:[6]})]),default:l(()=>[c(" "+p(i.errorMessage),1)]),_:1})):S("",!0)]),_:1})])}const Q=j(O,[["render",W]]);export{Q as default};
