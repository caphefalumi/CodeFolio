import{_ as N,c as h,o as c,a as s,w as a,b as d,f as m,g as S,r as i,h as z,F as k,i as V,d as u,t as _,e as y,j as E}from"./index-C60KAqoL.js";const O={name:"ProjectsView",data(){return{projects:[],search:"",selectedType:"all",sortBy:"newest",page:1,itemsPerPage:6,projectTypes:[{title:"All Types",value:"all"},{title:"Web App",value:"web"},{title:"Mobile App",value:"mobile"},{title:"Game",value:"game"},{title:"Design",value:"design"}],sortOptions:[{title:"Newest First",value:"newest"},{title:"Most Liked",value:"liked"},{title:"Most Viewed",value:"viewed"}],errorMessage:""}},computed:{filteredProjects(){let e=this.projects;if(this.selectedType!=="all"&&(e=e.filter(t=>t.type===this.selectedType)),this.search)if(this.search.startsWith("#")){const t=this.search.slice(1).toLowerCase();e=e.filter(o=>Array.isArray(o.tags)&&o.tags.some(n=>n.toLowerCase().includes(t)))}else e=e.filter(t=>{var o;return t.title.toLowerCase().includes(this.search.toLowerCase())||((o=t.description)==null?void 0:o.toLowerCase().includes(this.search.toLowerCase()))});return this.sortBy==="newest"?e=e.sort((t,o)=>new Date(o.createdAt)-new Date(t.createdAt)):this.sortBy==="liked"?e=e.sort((t,o)=>(o.upvotes||0)-(t.upvotes||0)):this.sortBy==="viewed"&&(e=e.sort((t,o)=>(o.views||0)-(t.views||0))),e},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)},paginatedProjects(){const e=(this.page-1)*this.itemsPerPage;return this.filteredProjects.slice(e,e+this.itemsPerPage)}},methods:{async toggleLike(e){var t,o;try{if(e.liked){const n=await y.post(`/api/posts/${e._id}/downvote`);e.downvotes=n.data.downvotes,e.liked=!1}else{const n=await y.post(`/api/posts/${e._id}/upvote`);e.upvotes=n.data.upvotes,e.liked=!0}}catch(n){this.errorMessage=((o=(t=n.response)==null?void 0:t.data)==null?void 0:o.message)||n.message||"Failed to update vote. Please try again."}},async handleCreatePost(){this.errorMessage="",this.loading=!0,this.loading=!1}},async mounted(){try{const e=await y.get("/api/posts/");this.projects=e.data,console.log("Projects:",this.projects)}catch(e){console.error("Error fetching projects:",e)}}},W={"aria-label":"Projects Search and Filter"},G={"aria-label":"Projects List"},Q={role:"list","aria-label":"Project tags"},q={"aria-label":"Page Navigation"};function H(e,t,o,n,r,v){const L=i("v-text-field"),p=i("v-col"),b=i("v-select"),g=i("v-row"),x=i("v-card-title"),C=i("v-chip"),j=i("v-card-text"),w=i("v-btn"),B=i("v-spacer"),P=i("v-icon"),M=i("v-card-actions"),T=i("v-card"),F=i("v-pagination"),A=i("v-alert"),U=i("v-container"),D=E("auto-animate");return c(),h("div",null,[s(U,null,{default:a(()=>[d("section",W,[s(g,{class:"mb-6"},{default:a(()=>[s(p,{cols:"12",md:"6"},{default:a(()=>[s(L,{modelValue:r.search,"onUpdate:modelValue":t[0]||(t[0]=l=>r.search=l),label:"Search projects","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","aria-label":"Search by project title or description. Use # followed by a tag name to search by tags."},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",md:"3"},{default:a(()=>[s(b,{modelValue:r.selectedType,"onUpdate:modelValue":t[1]||(t[1]=l=>r.selectedType=l),items:r.projectTypes,"item-title":"title","item-value":"value",label:"Project Type",variant:"outlined","hide-details":"","aria-label":"Filter projects by type"},null,8,["modelValue","items"])]),_:1}),s(p,{cols:"12",md:"3"},{default:a(()=>[s(b,{modelValue:r.sortBy,"onUpdate:modelValue":t[2]||(t[2]=l=>r.sortBy=l),items:r.sortOptions,"item-title":"title","item-value":"value",label:"Sort By",variant:"outlined","hide-details":"","aria-label":"Sort projects by criteria"},null,8,["modelValue","items"])]),_:1})]),_:1})]),d("section",G,[z((c(),m(g,null,{default:a(()=>[(c(!0),h(k,null,V(v.paginatedProjects,l=>(c(),m(p,{key:l._id,cols:"12",md:"4"},{default:a(()=>[d("article",null,[s(T,null,{default:a(()=>[s(x,null,{default:a(()=>[u(_(l.title),1)]),_:2},1024),s(j,null,{default:a(()=>[d("p",null,_(l.description),1),d("div",Q,[(c(!0),h(k,null,V(l.tags,f=>(c(),m(C,{key:f,class:"mr-2 mb-2",size:"small",role:"listitem"},{default:a(()=>[u(_(f),1)]),_:2},1024))),128))])]),_:2},1024),s(M,null,{default:a(()=>[s(w,{color:"primary",variant:"text",to:`${l.getFullPath}`,"prepend-icon":"mdi-eye","aria-label":`View project: ${l.title}`},{default:a(()=>t[4]||(t[4]=[u(" View Project ")])),_:2,__:[4]},1032,["to","aria-label"]),s(B),s(w,{icon:"",onClick:f=>v.toggleLike(l),"aria-label":`${l.liked?"Unlike":"Like"} project: ${l.title}`,title:`${l.liked?"Unlike":"Like"} this project`},{default:a(()=>[s(P,{"aria-hidden":"true"},{default:a(()=>[u(_(l.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1024)]),_:2},1032,["onClick","aria-label","title"])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})),[[D]])]),d("section",q,[s(g,{class:"mt-6"},{default:a(()=>[s(p,{cols:"12",class:"text-center"},{default:a(()=>[s(F,{modelValue:r.page,"onUpdate:modelValue":t[3]||(t[3]=l=>r.page=l),length:v.totalPages,rounded:"","aria-label":"Project pages navigation"},null,8,["modelValue","length"])]),_:1})]),_:1})]),r.errorMessage?(c(),m(A,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"},role:"alert","aria-live":"polite"},{prepend:a(()=>[s(P,{color:"error",size:"24","aria-hidden":"true"},{default:a(()=>t[5]||(t[5]=[u("mdi-alert-circle")])),_:1,__:[5]})]),default:a(()=>[u(" "+_(r.errorMessage),1)]),_:1})):S("",!0)]),_:1})])}const J=N(O,[["render",H]]);export{J as default};
