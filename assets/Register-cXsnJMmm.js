import{_ as L,C as M,g as f,o as p,w as l,a as s,r as t,d as m,b as c,h as R,i as S,n as U,t as N,p as z,f as _}from"./index-DUs6Mjje.js";const A={name:"RegisterComponent",components:{GoogleLogin:M},data(){return{loading:!1,form:{email:"",username:"",password:"",confirmPassword:""},rules:{required:o=>!!o||"This field is required",email:o=>/.+@.+\..+/.test(o)||"Email must be valid",username:o=>/^[a-zA-Z0-9_]{3,20}$/.test(o)||"Username must be 3-20 characters, letters, numbers, or underscores",password:o=>o.length>=8||"Password must be at least 8 characters",confirmPassword:o=>o===this.form.password||"Passwords must match"},errorMessage:""}},computed:{isFormValid(){return this.form.email&&this.rules.email(this.form.email)===!0&&this.form.username&&this.rules.username(this.form.username)===!0&&this.form.password&&this.rules.password(this.form.password)===!0&&this.form.confirmPassword&&this.rules.confirmPassword(this.form.confirmPassword)===!0}},methods:{async handleRegister(){var o,e;this.errorMessage="",this.loading=!0;try{await _.post("/api/auth/register",{email:this.form.email,username:this.form.username,password:this.form.password}),this.$router.push("/")}catch(n){this.errorMessage=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)||n.message||"Registration failed. Please try again."}finally{this.loading=!1}},async handleGoogleLogin(o){var n;const e=z(o.credential);console.log("Google user data:",e);try{const i=await _.post("/auth/google/register",e);localStorage.setItem("user",JSON.stringify(i.data)),this.$router.push("/")}catch(i){console.error("Google registration error:",((n=i.response)==null?void 0:n.data)||i.message)}}}},B={class:"text-center"},F={class:"text-center mt-4"};function D(o,e,n,i,r,d){const g=t("v-card-title"),u=t("v-text-field"),w=t("v-btn"),v=t("v-form"),b=t("v-divider"),h=t("GoogleLogin"),y=t("router-link"),V=t("v-icon"),x=t("v-alert"),P=t("v-card-text"),k=t("v-card"),q=t("v-col"),C=t("v-row"),G=t("v-container");return p(),f(G,null,{default:l(()=>[s(C,{justify:"center"},{default:l(()=>[s(q,{cols:"12",sm:"8",md:"6"},{default:l(()=>[s(k,{class:"mt-8"},{default:l(()=>[s(g,{class:"text-h4 text-center pt-6"},{default:l(()=>e[4]||(e[4]=[m(" Create Account ")])),_:1,__:[4]}),s(P,null,{default:l(()=>[s(v,{onSubmit:S(d.handleRegister,["prevent"])},{default:l(()=>[s(u,{modelValue:r.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>r.form.email=a),label:"Email",type:"email",required:"",rules:[r.rules.required,r.rules.email]},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.username,"onUpdate:modelValue":e[1]||(e[1]=a=>r.form.username=a),label:"Username",type:"text",required:"",rules:[r.rules.required,r.rules.username]},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.form.password=a),label:"Password",type:"password",required:"",rules:[r.rules.required,r.rules.password]},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.form.confirmPassword=a),label:"Confirm Password",type:"password",required:"",rules:[r.rules.required,r.rules.confirmPassword]},null,8,["modelValue","rules"]),s(w,{type:"submit",color:"primary",block:"",class:"mt-4",loading:r.loading,disabled:!d.isFormValid,style:U(d.isFormValid?"background-color: #43a047; color: #fff;":"background-color: #bdbdbd; color: #fff;")},{default:l(()=>e[5]||(e[5]=[m(" Register ")])),_:1,__:[5]},8,["loading","disabled","style"])]),_:1},8,["onSubmit"]),s(b,{class:"my-4"}),c("div",B,[e[6]||(e[6]=c("p",{class:"text-body-2 mb-2"},"Or register with",-1)),s(h,{callback:d.handleGoogleLogin,prompt:"","auto-login":""},null,8,["callback"])]),c("div",F,[s(y,{to:"/login",class:"text-decoration-none"},{default:l(()=>e[7]||(e[7]=[m(" Already have an account? Login ")])),_:1,__:[7]})]),r.errorMessage?(p(),f(x,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:l(()=>[s(V,{color:"error",size:"24"},{default:l(()=>e[8]||(e[8]=[m("mdi-alert-circle")])),_:1,__:[8]})]),default:l(()=>[m(" "+N(r.errorMessage),1)]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const O=L(A,[["render",D]]);export{O as default};
