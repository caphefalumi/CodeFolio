import{_ as L,C as M,f as p,o as f,w as l,a as s,r as t,d,b as c,g as R,k as S,q as U,t as N,u as z,e as g}from"./index-ClXwWzJ6.js";const A={name:"RegisterComponent",components:{GoogleLogin:M},data(){return{loading:!1,form:{email:"",username:"",password:"",confirmPassword:""},rules:{required:o=>!!o||"This field is required",email:o=>/.+@.+\..+/.test(o)||"Email must be valid",username:o=>/^[a-zA-Z0-9_]{3,20}$/.test(o)||"Username must be 3-20 characters, letters, numbers, or underscores",password:o=>o.length>=8||"Password must be at least 8 characters",confirmPassword:o=>o===this.form.password||"Passwords must match"},errorMessage:""}},computed:{isFormValid(){return this.form.email&&this.rules.email(this.form.email)===!0&&this.form.username&&this.rules.username(this.form.username)===!0&&this.form.password&&this.rules.password(this.form.password)===!0&&this.form.confirmPassword&&this.rules.confirmPassword(this.form.confirmPassword)===!0}},methods:{async handleRegister(){var o,e;this.errorMessage="",this.loading=!0;try{await g.post("/api/auth/register",{email:this.form.email,username:this.form.username,password:this.form.password}),this.$router.push("/")}catch(n){this.errorMessage=((e=(o=n.response)==null?void 0:o.data)==null?void 0:e.message)||n.message||"Registration failed. Please try again."}finally{this.loading=!1}},async handleGoogleLogin(o){var n;const e=z(o.credential);console.log("Google user data:",e);try{const i=await g.post("/auth/google/register",e);localStorage.setItem("user",JSON.stringify(i.data)),this.$router.push("/")}catch(i){console.error("Google registration error:",((n=i.response)==null?void 0:n.data)||i.message)}}}},B={class:"text-center"},F={class:"text-center mt-4"};function D(o,e,n,i,r,m){const _=t("v-card-title"),u=t("v-text-field"),b=t("v-btn"),w=t("v-form"),h=t("v-divider"),v=t("GoogleLogin"),y=t("router-link"),V=t("v-icon"),x=t("v-alert"),P=t("v-card-text"),k=t("v-card"),q=t("v-col"),C=t("v-row"),G=t("v-container");return f(),p(G,null,{default:l(()=>[s(C,{justify:"center"},{default:l(()=>[s(q,{cols:"12",sm:"8",md:"6"},{default:l(()=>[s(k,{class:"mt-8"},{default:l(()=>[s(_,{class:"text-h4 text-center pt-6",id:"register-heading"},{default:l(()=>e[4]||(e[4]=[d(" Create Account ")])),_:1,__:[4]}),s(P,null,{default:l(()=>[s(w,{onSubmit:S(m.handleRegister,["prevent"]),"aria-labelledby":"register-heading"},{default:l(()=>[s(u,{modelValue:r.form.email,"onUpdate:modelValue":e[0]||(e[0]=a=>r.form.email=a),label:"Email",type:"email",required:"",rules:[r.rules.required,r.rules.email],"aria-describedby":"email-register-help",autocomplete:"email"},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.username,"onUpdate:modelValue":e[1]||(e[1]=a=>r.form.username=a),label:"Username",type:"text",required:"",rules:[r.rules.required,r.rules.username],"aria-describedby":"username-help",autocomplete:"username"},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.form.password=a),label:"Password",type:"password",required:"",rules:[r.rules.required,r.rules.password],"aria-describedby":"password-register-help",autocomplete:"new-password"},null,8,["modelValue","rules"]),s(u,{modelValue:r.form.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.form.confirmPassword=a),label:"Confirm Password",type:"password",required:"",rules:[r.rules.required,r.rules.confirmPassword],"aria-describedby":"confirm-password-help",autocomplete:"new-password"},null,8,["modelValue","rules"]),s(b,{type:"submit",color:"primary",block:"",class:"mt-4",loading:r.loading,disabled:!m.isFormValid,style:U(m.isFormValid?"background-color: #43a047; color: #fff;":"background-color: #bdbdbd; color: #fff;"),"aria-label":r.loading?"Creating account...":"Create your account"},{default:l(()=>e[5]||(e[5]=[d(" Register ")])),_:1,__:[5]},8,["loading","disabled","style","aria-label"])]),_:1},8,["onSubmit"]),s(h,{class:"my-4","aria-hidden":"true"}),c("div",B,[e[6]||(e[6]=c("p",{class:"text-body-2 mb-2"},"Or register with",-1)),s(v,{callback:m.handleGoogleLogin,prompt:"","auto-login":""},null,8,["callback"])]),c("div",F,[s(y,{to:"/login",class:"text-decoration-none"},{default:l(()=>e[7]||(e[7]=[d(" Already have an account? Login ")])),_:1,__:[7]})]),r.errorMessage?(f(),p(x,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"},role:"alert","aria-live":"polite"},{prepend:l(()=>[s(V,{color:"error",size:"24","aria-hidden":"true"},{default:l(()=>e[8]||(e[8]=[d("mdi-alert-circle")])),_:1,__:[8]})]),default:l(()=>[d(" "+N(r.errorMessage),1)]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const O=L(A,[["render",D]]);export{O as default};
