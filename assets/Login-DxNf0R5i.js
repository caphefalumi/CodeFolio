import{_ as f,g as c,o as d,w as r,h,d as l,r as o,t as b,C as T,a as t,b as a,i as B,f as v}from"./index-DGz9mqfk.js";const E={name:"VIconLogin",props:{provider:{type:String,required:!0}},computed:{providerName(){return this.provider}}};function P(n,e,m,w,s,i){const _=o("v-icon"),u=o("v-btn");return d(),c(u,{class:"login-btn",block:"",elevation:"1"},{default:r(()=>[m.provider==="google"?(d(),c(_,{key:0,left:"",class:"me-2 google-icon",color:"#EA4335"})):m.provider==="github"?(d(),c(_,{key:1,left:"",class:"me-2 github-icon",color:"#4267B2"})):h("",!0),l(" Login with "+b(i.providerName),1)]),_:1})}const j=f(E,[["render",P],["__scopeId","data-v-41519d0b"]]),D={components:{GoogleLogin:T,vIconLogin:j},data(){return{loading:!1,errorMessage:"",form:{email:"",password:""},rules:{required:n=>!!n||"This field is required",email:n=>/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(n)||"Email must be valid"}}},methods:{async handleLogin(){this.loading=!0,this.errorMessage="";try{const n=await v.post("/api/auth/login/jwt",{email:this.form.email,password:this.form.password},{withCredentials:!0});console.log(n.data),sessionStorage.setItem("accessToken",n.data.accessToken),this.$router.push("/")}catch(n){console.error("Login error:",n),n.response&&n.response.status===401?this.errorMessage="Invalid email or password":this.errorMessage="Something went wrong. Please try again"}finally{this.loading=!1}},async handleGoogleLogin(n){v.post("/api/auth/login/google",{token:n.access_token}).then(e=>{console.log(e.data),sessionStorage.setItem("accessToken",e.data.accessToken),this.$router.push("/")}).catch(e=>{console.error("Google login error:",e),this.errorMessage="Google login failed. Please try again"})},handleGithubLogin(){window.location.href="/api/auth/login/github"}}},O={class:"login-buttons"},U={class:"login-btn-wrapper"},z={class:"text-center mt-4"};function A(n,e,m,w,s,i){const _=o("v-card-title"),u=o("v-text-field"),y=o("v-icon"),k=o("v-alert"),x=o("v-btn"),L=o("v-form"),V=o("v-divider"),p=o("v-icon-login"),G=o("GoogleLogin"),M=o("router-link"),q=o("v-card-text"),C=o("v-card"),I=o("v-col"),N=o("v-row"),S=o("v-container");return d(),c(S,null,{default:r(()=>[t(N,{justify:"center"},{default:r(()=>[t(I,{cols:"12",sm:"8",md:"6"},{default:r(()=>[t(C,{class:"mt-8"},{default:r(()=>[t(_,{class:"text-h4 text-center pt-6"},{default:r(()=>e[2]||(e[2]=[l(" Login ")])),_:1,__:[2]}),t(q,null,{default:r(()=>[t(L,{onSubmit:B(i.handleLogin,["prevent"])},{default:r(()=>[t(u,{modelValue:s.form.email,"onUpdate:modelValue":e[0]||(e[0]=g=>s.form.email=g),label:"Email",type:"email",required:"",rules:[s.rules.required,s.rules.email]},null,8,["modelValue","rules"]),t(u,{modelValue:s.form.password,"onUpdate:modelValue":e[1]||(e[1]=g=>s.form.password=g),label:"Password",type:"password",required:"",rules:[s.rules.required]},null,8,["modelValue","rules"]),s.errorMessage?(d(),c(k,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:r(()=>[t(y,{color:"error",size:"24"},{default:r(()=>e[3]||(e[3]=[l("mdi-alert-circle")])),_:1,__:[3]})]),default:r(()=>[l(" "+b(s.errorMessage),1)]),_:1})):h("",!0),t(x,{type:"submit",color:"primary",block:"",class:"mt-4",loading:s.loading},{default:r(()=>e[4]||(e[4]=[l("Login")])),_:1,__:[4]},8,["loading"])]),_:1},8,["onSubmit"]),t(V,{class:"my-4"}),e[6]||(e[6]=a("div",{class:"text-center text-body-2 mb-2"},[a("span",null,"Or login with")],-1)),a("div",O,[t(G,{callback:i.handleGoogleLogin,prompt:"","auto-login":"","popup-type":"TOKEN"},{default:r(()=>[t(p,{provider:"google"})]),_:1},8,["callback"]),a("div",U,[t(p,{provider:"github",onClick:i.handleGithubLogin},null,8,["onClick"])])]),a("div",z,[t(M,{to:"/register",class:"text-decoration-none"},{default:r(()=>e[5]||(e[5]=[l(" Don't have an account? Register ")])),_:1,__:[5]})])]),_:1,__:[6]})]),_:1})]),_:1})]),_:1})]),_:1})}const R=f(D,[["render",A],["__scopeId","data-v-1192ef3d"]]);export{R as default};
