import{_ as V,C as x,f as y,o as q,w as o,a as t,r as l,d,b as P,x as v,e as c}from"./index-CDKgNPhV.js";import{A}from"./AppForm-BihCM0se.js";import{u as U}from"./common-BV6yZd2B.js";const R={name:"RegisterComponent",components:{GoogleLogin:x,AppForm:A},setup(){const{handleError:e}=U();return{handleError:e}},data(){return{loading:!1,form:{firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:""},rules:{required:e=>!!e||"This field is required",name:e=>e?e.length<2?"Name must be at least 2 characters":e.length>50?"Name must be less than 50 characters":/^[a-zA-Z\s'-]+$/.test(e)?!0:"Name can only contain letters, spaces, hyphens, and apostrophes":"This field is required",email:e=>/.+@.+\..+/.test(e)||"Email must be valid",username:e=>/^[a-zA-Z0-9_]{3,20}$/.test(e)||"Username must be 3-20 characters, letters, numbers, or underscores",password:e=>e?e.length<8?"Password must be at least 8 characters":/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?/(?=.*[@$!%*?&])/.test(e)?!0:"Password must contain at least one special character (@$!%*?&)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter":"Password is required",confirmPassword:e=>e===this.form.password||"Passwords must match"},errorMessage:""}},computed:{isFormValid(){return this.form.firstName&&this.rules.name(this.form.firstName)===!0&&this.form.lastName&&this.rules.name(this.form.lastName)===!0&&this.form.email&&this.rules.email(this.form.email)===!0&&this.form.username&&this.rules.username(this.form.username)===!0&&this.form.password&&this.rules.password(this.form.password)===!0&&this.form.confirmPassword&&this.rules.confirmPassword(this.form.confirmPassword)===!0}},methods:{async handleRegister(){this.errorMessage="",this.loading=!0;try{await c.post("/api/auth/register",{firstName:this.form.firstName,lastName:this.form.lastName,email:this.form.email,username:this.form.username,password:this.form.password}),this.$router.push("/")}catch(e){this.errorMessage=this.handleError(e,"Registration failed. Please try again.")}finally{this.loading=!1}},async handleGoogleLogin(e){var i;const s=v(e.credential);console.log("Google user data:",s);try{const n=await c.post("/auth/google/register",s);localStorage.setItem("user",JSON.stringify(n.data)),this.$router.push("/")}catch(n){console.error("Google registration error:",((i=n.response)==null?void 0:i.data)||n.message)}}}},k={class:"mt-4 text-center"};function C(e,s,i,n,r,p){const h=l("v-card-title"),m=l("v-text-field"),u=l("v-col"),f=l("v-row"),g=l("app-form"),_=l("router-link"),w=l("v-card-text"),b=l("v-card"),N=l("v-container");return q(),y(N,null,{default:o(()=>[t(f,{justify:"center"},{default:o(()=>[t(u,{cols:"12",sm:"8",md:"6"},{default:o(()=>[t(b,{class:"mt-8"},{default:o(()=>[t(h,{class:"text-h4 text-center pt-6",id:"register-heading"},{default:o(()=>s[5]||(s[5]=[d("Create Account")])),_:1,__:[5]}),t(w,null,{default:o(()=>[t(g,{loading:r.loading,"error-message":r.errorMessage,"submit-button-text":"Register","submit-button-block":!0,"submit-button-class":"mt-4","aria-labelled-by":"register-heading",onSubmit:p.handleRegister},{default:o(()=>[t(f,null,{default:o(()=>[t(u,{cols:"6"},{default:o(()=>[t(m,{modelValue:r.form.firstName,"onUpdate:modelValue":s[0]||(s[0]=a=>r.form.firstName=a),label:"First Name",type:"text",required:"",rules:[r.rules.required,r.rules.name],autocomplete:"given-name"},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"6"},{default:o(()=>[t(m,{modelValue:r.form.lastName,"onUpdate:modelValue":s[1]||(s[1]=a=>r.form.lastName=a),label:"Last Name",type:"text",required:"",rules:[r.rules.required,r.rules.name],autocomplete:"family-name"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(m,{modelValue:r.form.email,"onUpdate:modelValue":s[2]||(s[2]=a=>r.form.email=a),label:"Email",type:"email",required:"",rules:[r.rules.required,r.rules.email],autocomplete:"email"},null,8,["modelValue","rules"]),t(m,{modelValue:r.form.username,"onUpdate:modelValue":s[3]||(s[3]=a=>r.form.username=a),label:"Username",type:"text",required:"",rules:[r.rules.required,r.rules.username],autocomplete:"username"},null,8,["modelValue","rules"]),t(m,{modelValue:r.form.password,"onUpdate:modelValue":s[4]||(s[4]=a=>r.form.password=a),label:"Password",type:"password",required:"",rules:[r.rules.required,r.rules.password],autocomplete:"new-password"},null,8,["modelValue","rules"])]),_:1},8,["loading","error-message","onSubmit"]),P("div",k,[s[7]||(s[7]=d("Already have an account? ")),t(_,{to:"/login"},{default:o(()=>s[6]||(s[6]=[d("Login")])),_:1,__:[6]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const M=V(R,[["render",C]]);export{M as default};
