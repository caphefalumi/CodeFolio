import{_ as F,c as j,o as _,a as e,w as t,r as l,g as x,h as z,d as n,t as i,b as c,F as A,e as U,m as I,f as C}from"./index-Cgcqb8d-.js";const T={name:"ProjectDetailView",data(){return{project:{title:"",description:"",image:"",author:"",tags:[],githubUrl:"",createdAt:"",updatedAt:"",views:0,liked:!1},githubStats:{stars:0,forks:0,issues:0},comments:[],newComment:""}},methods:{async fetchProjectDetail(){try{const{username:a,id:o}=this.$route.params,r=(await C.get(`/api/posts/${a}/${o}`)).data;this.project={title:r.title,description:r.description,image:r.coverImage,author:r.author.username,tags:r.tags||[],githubUrl:r.githubUrl,createdAt:new Date(r.createdAt).toLocaleDateString(),updatedAt:new Date(r.updatedAt).toLocaleDateString(),views:r.views,liked:!1},this.comments=(r.comments||[]).map(s=>({id:s._id,author:s.user.username,date:new Date(s.createdAt).toLocaleDateString(),content:s.content})),this.project.githubUrl&&this.fetchGitHubStats()}catch(a){console.error("Error fetching project detail:",a)}},async fetchGitHubStats(){try{const a=this.project.githubUrl.replace("https://github.com/","https://api.github.com/repos/"),o=await C.get(a),{stargazers_count:b,forks_count:r,open_issues_count:s}=o.data;this.githubStats={stars:b,forks:r,issues:s}}catch(a){console.error("Error fetching GitHub stats:",a)}},toggleLike(){this.project.liked=!this.project.liked},async addComment(){if(this.newComment.trim())try{const a=I(),o=await C.post(`/api/posts/${this.$route.params.id}/comments`,{content:this.newComment},{headers:{Authorization:`Bearer ${a}`}});this.comments.unshift({id:`c${Date.now()}`,author:"You",date:new Date().toLocaleDateString(),content:this.newComment}),this.newComment=""}catch(a){console.error("Error posting comment:",a)}}},mounted(){this.fetchProjectDetail()}},Y={class:"text-body-1 mb-4"},q={class:"text-center"},J={class:"text-h4"},K={class:"text-center"},M={class:"text-h4"},O={class:"text-center"},Q={class:"text-h4"};function R(a,o,b,r,s,y){const V=l("v-img"),m=l("v-card-title"),L=l("v-card-subtitle"),B=l("v-chip"),p=l("v-card-text"),w=l("v-btn"),P=l("v-spacer"),f=l("v-icon"),G=l("v-card-actions"),v=l("v-card"),d=l("v-col"),D=l("v-row"),h=l("v-list-item-title"),k=l("v-list-item-subtitle"),g=l("v-list-item"),S=l("v-list"),H=l("v-textarea"),E=l("v-avatar"),N=l("v-container");return _(),j("div",null,[e(N,null,{default:t(()=>[e(D,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>[e(v,null,{default:t(()=>[e(V,{src:s.project.image,height:"400",cover:""},null,8,["src"]),e(m,{class:"text-h3"},{default:t(()=>[n(i(s.project.title),1)]),_:1}),e(L,null,{default:t(()=>[n(" By "+i(s.project.author),1)]),_:1}),e(p,null,{default:t(()=>[c("p",Y,i(s.project.description),1),(_(!0),j(A,null,U(s.project.tags,u=>(_(),x(B,{key:u,class:"mr-2 mb-2"},{default:t(()=>[n(i(u),1)]),_:2},1024))),128))]),_:1}),e(G,null,{default:t(()=>[e(w,{color:"primary",variant:"text",href:s.project.githubUrl,target:"_blank","prepend-icon":"mdi-github"},{default:t(()=>o[1]||(o[1]=[n(" View on GitHub ")])),_:1,__:[1]},8,["href"]),e(P),e(w,{icon:"",onClick:y.toggleLike},{default:t(()=>[e(f,null,{default:t(()=>[n(i(s.project.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),s.project.githubUrl?(_(),x(d,{key:0,cols:"12",md:"6"},{default:t(()=>[e(v,null,{default:t(()=>[e(m,null,{default:t(()=>o[2]||(o[2]=[n("GitHub Stats")])),_:1,__:[2]}),e(p,null,{default:t(()=>[e(D,null,{default:t(()=>[e(d,{cols:"4"},{default:t(()=>[c("div",q,[c("div",J,i(s.githubStats.stars),1),o[3]||(o[3]=c("div",{class:"text-subtitle-1"},"Stars",-1))])]),_:1}),e(d,{cols:"4"},{default:t(()=>[c("div",K,[c("div",M,i(s.githubStats.forks),1),o[4]||(o[4]=c("div",{class:"text-subtitle-1"},"Forks",-1))])]),_:1}),e(d,{cols:"4"},{default:t(()=>[c("div",O,[c("div",Q,i(s.githubStats.issues),1),o[5]||(o[5]=c("div",{class:"text-subtitle-1"},"Issues",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):z("",!0),e(d,{cols:"12",md:"6"},{default:t(()=>[e(v,null,{default:t(()=>[e(m,null,{default:t(()=>o[6]||(o[6]=[n("Project Details")])),_:1,__:[6]}),e(p,null,{default:t(()=>[e(S,null,{default:t(()=>[e(g,null,{prepend:t(()=>[e(f,null,{default:t(()=>o[7]||(o[7]=[n("mdi-calendar")])),_:1,__:[7]})]),default:t(()=>[e(h,null,{default:t(()=>o[8]||(o[8]=[n("Created")])),_:1,__:[8]}),e(k,null,{default:t(()=>[n(i(s.project.createdAt),1)]),_:1})]),_:1}),e(g,null,{prepend:t(()=>[e(f,null,{default:t(()=>o[9]||(o[9]=[n("mdi-update")])),_:1,__:[9]})]),default:t(()=>[e(h,null,{default:t(()=>o[10]||(o[10]=[n("Last Updated")])),_:1,__:[10]}),e(k,null,{default:t(()=>[n(i(s.project.updatedAt),1)]),_:1})]),_:1}),e(g,null,{prepend:t(()=>[e(f,null,{default:t(()=>o[11]||(o[11]=[n("mdi-eye")])),_:1,__:[11]})]),default:t(()=>[e(h,null,{default:t(()=>o[12]||(o[12]=[n("Views")])),_:1,__:[12]}),e(k,null,{default:t(()=>[n(i(s.project.views),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"12"},{default:t(()=>[e(v,null,{default:t(()=>[e(m,null,{default:t(()=>o[13]||(o[13]=[n("Comments")])),_:1,__:[13]}),e(p,null,{default:t(()=>[e(H,{modelValue:s.newComment,"onUpdate:modelValue":o[0]||(o[0]=u=>s.newComment=u),label:"Add a comment",rows:"3",variant:"outlined"},null,8,["modelValue"]),e(w,{color:"primary",onClick:y.addComment,disabled:!s.newComment.trim()},{default:t(()=>o[14]||(o[14]=[n(" Post Comment ")])),_:1,__:[14]},8,["onClick","disabled"])]),_:1}),e(S,null,{default:t(()=>[(_(!0),j(A,null,U(s.comments,u=>(_(),x(g,{key:u.id,subtitle:u.author+" â€¢ "+u.date},{prepend:t(()=>[e(E,{color:"primary"},{default:t(()=>[n(i(u.author.charAt(0)),1)]),_:2},1024)]),default:t(()=>[e(h,null,{default:t(()=>[n(i(u.content),1)]),_:2},1024)]),_:2},1032,["subtitle"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const X=F(T,[["render",R]]);export{X as default};
