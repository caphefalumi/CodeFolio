import{h as V,i as L,f as N,o as O,w as r,a as o,r as n,d as u,b as _,j,u as q,C as T,k as C,l as E}from"./index-iZje_ahG.js";const G={class:"text-center"},J={class:"text-center mt-4"},D={__name:"Login",setup(B){const m=E(),i=V(!1),a=L({email:"",password:""}),d={required:t=>!!t||"This field is required",email:t=>/.+@.+\..+/.test(t)||"Email must be valid"},p=async()=>{i.value=!0;try{const t=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error("Login failed");const e=await t.json();localStorage.setItem("user",JSON.stringify(e)),m.push("/")}catch(t){console.error("Login error:",t)}finally{i.value=!1}},f=async t=>{const e=C(t.credential);console.log("Google user data:",e);try{const s=await fetch("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Google login failed");const l=await s.json();localStorage.setItem("user",JSON.stringify(l)),m.push("/")}catch(s){console.error("Google login error:",s)}};return(t,e)=>{const s=n("v-card-title"),l=n("v-text-field"),v=n("v-btn"),g=n("v-form"),y=n("v-divider"),w=n("router-link"),b=n("v-card-text"),h=n("v-card"),x=n("v-col"),k=n("v-row"),S=n("v-container");return O(),N(S,null,{default:r(()=>[o(k,{justify:"center"},{default:r(()=>[o(x,{cols:"12",sm:"8",md:"6"},{default:r(()=>[o(h,{class:"mt-8"},{default:r(()=>[o(s,{class:"text-h4 text-center pt-6"},{default:r(()=>e[2]||(e[2]=[u(" Login ")])),_:1,__:[2]}),o(b,null,{default:r(()=>[o(g,{onSubmit:j(p,["prevent"])},{default:r(()=>[o(l,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=c=>a.email=c),label:"Email",type:"email",required:"",rules:[d.required,d.email]},null,8,["modelValue","rules"]),o(l,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=c=>a.password=c),label:"Password",type:"password",required:"",rules:[d.required]},null,8,["modelValue","rules"]),o(v,{type:"submit",color:"primary",block:"",class:"mt-4",loading:i.value},{default:r(()=>e[3]||(e[3]=[u(" Login ")])),_:1,__:[3]},8,["loading"])]),_:1}),o(y,{class:"my-4"}),_("div",G,[e[4]||(e[4]=_("p",{class:"text-body-2 mb-2"},"Or login with",-1)),o(q(T),{callback:f,prompt:"","auto-login":""})]),_("div",J,[o(w,{to:"/register",class:"text-decoration-none"},{default:r(()=>e[5]||(e[5]=[u(" Don't have an account? Register ")])),_:1,__:[5]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{D as default};
