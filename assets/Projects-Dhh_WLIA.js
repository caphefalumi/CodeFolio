import{_ as N,c as g,o as d,a as s,w as o,h as U,g as p,i as S,r as a,F as V,e as k,d as c,t as m,f as h,j as z,b as E}from"./index-8Zv1DPTr.js";const O={name:"ProjectsView",data(){return{projects:[],search:"",selectedType:"all",sortBy:"newest",page:1,itemsPerPage:9,projectTypes:[{title:"All Types",value:"all"},{title:"Web App",value:"web"},{title:"Mobile App",value:"mobile"},{title:"Game",value:"game"},{title:"Design",value:"design"}],sortOptions:[{title:"Newest First",value:"newest"},{title:"Most Liked",value:"liked"},{title:"Most Viewed",value:"viewed"}],errorMessage:""}},computed:{filteredProjects(){let e=this.projects;return this.selectedType!=="all"&&(e=e.filter(t=>t.type===this.selectedType)),this.search&&(e=e.filter(t=>{var r;return t.title.toLowerCase().includes(this.search.toLowerCase())||((r=t.description)==null?void 0:r.toLowerCase().includes(this.search.toLowerCase()))})),this.sortBy==="newest"?e=e.sort((t,r)=>new Date(r.createdAt)-new Date(t.createdAt)):this.sortBy==="liked"?e=e.sort((t,r)=>(r.upvotes||0)-(t.upvotes||0)):this.sortBy==="viewed"&&(e=e.sort((t,r)=>(r.views||0)-(t.views||0))),e},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)},paginatedProjects(){const e=(this.page-1)*this.itemsPerPage;return this.filteredProjects.slice(e,e+this.itemsPerPage)}},methods:{async toggleLike(e){var t,r;try{if(e.liked){const n=await h.post(`/api/posts/${e._id}/downvote`);e.downvotes=n.data.downvotes,e.liked=!1}else{const n=await h.post(`/api/posts/${e._id}/upvote`);e.upvotes=n.data.upvotes,e.liked=!0}}catch(n){this.errorMessage=((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message||"Failed to update vote. Please try again."}},async handleCreatePost(){this.errorMessage="",this.loading=!0,this.loading=!1}},async mounted(){try{const e=await h.get("/api/posts/");this.projects=e.data,console.log("Projects:",this.projects)}catch(e){console.error("Error fetching projects:",e)}}};function G(e,t,r,n,i,_){const b=a("v-text-field"),u=a("v-col"),y=a("v-select"),v=a("v-row"),x=a("v-card-title"),B=a("v-chip"),C=a("v-card-text"),w=a("v-btn"),M=a("v-spacer"),P=a("v-icon"),T=a("v-card-actions"),L=a("v-card"),j=a("v-pagination"),D=a("v-alert"),F=a("v-container"),A=z("auto-animate");return d(),g("div",null,[s(F,null,{default:o(()=>[s(v,{class:"mb-6"},{default:o(()=>[s(u,{cols:"12",md:"6"},{default:o(()=>[s(b,{modelValue:i.search,"onUpdate:modelValue":t[0]||(t[0]=l=>i.search=l),label:"Search projects","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.selectedType,"onUpdate:modelValue":t[1]||(t[1]=l=>i.selectedType=l),items:i.projectTypes,"item-title":"title","item-value":"value",label:"Project Type",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.sortBy,"onUpdate:modelValue":t[2]||(t[2]=l=>i.sortBy=l),items:i.sortOptions,"item-title":"title","item-value":"value",label:"Sort By",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),U((d(),p(v,null,{default:o(()=>[(d(!0),g(V,null,k(_.filteredProjects,l=>(d(),p(u,{key:l._id,cols:"12",md:"4"},{default:o(()=>[s(L,null,{default:o(()=>[s(x,null,{default:o(()=>[c(m(l.title),1)]),_:2},1024),s(C,null,{default:o(()=>[E("p",null,m(l.description),1),(d(!0),g(V,null,k(l.tags,f=>(d(),p(B,{key:f,class:"mr-2 mb-2",size:"small"},{default:o(()=>[c(m(f),1)]),_:2},1024))),128))]),_:2},1024),s(T,null,{default:o(()=>[s(w,{color:"primary",variant:"text",to:`${l.getFullPath}`,"prepend-icon":"mdi-eye"},{default:o(()=>t[4]||(t[4]=[c(" View Project ")])),_:2,__:[4]},1032,["to"]),s(M),s(w,{icon:"",onClick:f=>_.toggleLike(l)},{default:o(()=>[s(P,null,{default:o(()=>[c(m(l.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})),[[A]]),s(v,{class:"mt-6"},{default:o(()=>[s(u,{cols:"12",class:"text-center"},{default:o(()=>[s(j,{modelValue:i.page,"onUpdate:modelValue":t[3]||(t[3]=l=>i.page=l),length:_.totalPages,rounded:""},null,8,["modelValue","length"])]),_:1})]),_:1}),i.errorMessage?(d(),p(D,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:o(()=>[s(P,{color:"error",size:"24"},{default:o(()=>t[5]||(t[5]=[c("mdi-alert-circle")])),_:1,__:[5]})]),default:o(()=>[c(" "+m(i.errorMessage),1)]),_:1})):S("",!0)]),_:1})])}const q=N(O,[["render",G]]);export{q as default};
