import{_ as N,c as f,o as d,a as s,w as o,g,h as D,r,F as V,e as k,d as c,t as p,f as h,b as U}from"./index-DUs6Mjje.js";const S={name:"ProjectsView",data(){return{projects:[],search:"",selectedType:"all",sortBy:"newest",page:1,itemsPerPage:9,projectTypes:[{title:"All Types",value:"all"},{title:"Web App",value:"web"},{title:"Mobile App",value:"mobile"},{title:"Game",value:"game"},{title:"Design",value:"design"}],sortOptions:[{title:"Newest First",value:"newest"},{title:"Most Liked",value:"liked"},{title:"Most Viewed",value:"viewed"}],errorMessage:""}},computed:{filteredProjects(){let e=this.projects;return this.selectedType!=="all"&&(e=e.filter(t=>t.type===this.selectedType)),this.search&&(e=e.filter(t=>{var a;return t.title.toLowerCase().includes(this.search.toLowerCase())||((a=t.description)==null?void 0:a.toLowerCase().includes(this.search.toLowerCase()))})),this.sortBy==="newest"?e=e.sort((t,a)=>new Date(a.createdAt)-new Date(t.createdAt)):this.sortBy==="liked"?e=e.sort((t,a)=>(a.upvotes||0)-(t.upvotes||0)):this.sortBy==="viewed"&&(e=e.sort((t,a)=>(a.views||0)-(t.views||0))),e},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)},paginatedProjects(){const e=(this.page-1)*this.itemsPerPage;return this.filteredProjects.slice(e,e+this.itemsPerPage)}},methods:{async toggleLike(e){var t,a;try{if(e.liked){const n=await h.post(`/api/posts/${e._id}/downvote`);e.downvotes=n.data.downvotes,e.liked=!1}else{const n=await h.post(`/api/posts/${e._id}/upvote`);e.upvotes=n.data.upvotes,e.liked=!0}}catch(n){this.errorMessage=((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||n.message||"Failed to update vote. Please try again."}},async handleCreatePost(){this.errorMessage="",this.loading=!0,this.loading=!1}},async mounted(){try{const e=await h.get("/api/posts/");this.projects=e.data,console.log("Projects:",this.projects)}catch(e){console.error("Error fetching projects:",e)}}};function z(e,t,a,n,i,m){const b=r("v-text-field"),u=r("v-col"),y=r("v-select"),_=r("v-row"),x=r("v-card-title"),B=r("v-chip"),C=r("v-card-text"),w=r("v-btn"),M=r("v-spacer"),P=r("v-icon"),T=r("v-card-actions"),L=r("v-card"),F=r("v-pagination"),j=r("v-alert"),A=r("v-container");return d(),f("div",null,[s(A,null,{default:o(()=>[s(_,{class:"mb-6"},{default:o(()=>[s(u,{cols:"12",md:"6"},{default:o(()=>[s(b,{modelValue:i.search,"onUpdate:modelValue":t[0]||(t[0]=l=>i.search=l),label:"Search projects","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.selectedType,"onUpdate:modelValue":t[1]||(t[1]=l=>i.selectedType=l),items:i.projectTypes,"item-title":"title","item-value":"value",label:"Project Type",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.sortBy,"onUpdate:modelValue":t[2]||(t[2]=l=>i.sortBy=l),items:i.sortOptions,"item-title":"title","item-value":"value",label:"Sort By",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),s(_,null,{default:o(()=>[(d(!0),f(V,null,k(m.filteredProjects,l=>(d(),g(u,{key:l._id,cols:"12",md:"4"},{default:o(()=>[s(L,null,{default:o(()=>[s(x,null,{default:o(()=>[c(p(l.title),1)]),_:2},1024),s(C,null,{default:o(()=>[U("p",null,p(l.description),1),(d(!0),f(V,null,k(l.tags,v=>(d(),g(B,{key:v,class:"mr-2 mb-2",size:"small"},{default:o(()=>[c(p(v),1)]),_:2},1024))),128))]),_:2},1024),s(T,null,{default:o(()=>[s(w,{color:"primary",variant:"text",to:`${l.getFullPath}`,"prepend-icon":"mdi-eye"},{default:o(()=>t[4]||(t[4]=[c(" View Project ")])),_:2,__:[4]},1032,["to"]),s(M),s(w,{icon:"",onClick:v=>m.toggleLike(l)},{default:o(()=>[s(P,null,{default:o(()=>[c(p(l.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s(_,{class:"mt-6"},{default:o(()=>[s(u,{cols:"12",class:"text-center"},{default:o(()=>[s(F,{modelValue:i.page,"onUpdate:modelValue":t[3]||(t[3]=l=>i.page=l),length:m.totalPages,rounded:""},null,8,["modelValue","length"])]),_:1})]),_:1}),i.errorMessage?(d(),g(j,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:o(()=>[s(P,{color:"error",size:"24"},{default:o(()=>t[5]||(t[5]=[c("mdi-alert-circle")])),_:1,__:[5]})]),default:o(()=>[c(" "+p(i.errorMessage),1)]),_:1})):D("",!0)]),_:1})])}const O=N(S,[["render",z]]);export{O as default};
