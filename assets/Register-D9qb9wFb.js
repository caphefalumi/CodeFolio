import{_ as U,C as G,f as g,o as _,w as o,a as t,r as a,d as m,b as f,g as L,k as M,q as R,t as S,u as z,e as h}from"./index-BnSyG7hX.js";const A={name:"RegisterComponent",components:{GoogleLogin:G},data(){return{loading:!1,form:{firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:""},rules:{required:s=>!!s||"This field is required",name:s=>s?s.length<2?"Name must be at least 2 characters":s.length>50?"Name must be less than 50 characters":/^[a-zA-Z\s'-]+$/.test(s)?!0:"Name can only contain letters, spaces, hyphens, and apostrophes":"This field is required",email:s=>/.+@.+\..+/.test(s)||"Email must be valid",username:s=>/^[a-zA-Z0-9_]{3,20}$/.test(s)||"Username must be 3-20 characters, letters, numbers, or underscores",password:s=>s?s.length<8?"Password must be at least 8 characters":/(?=.*[a-z])/.test(s)?/(?=.*[A-Z])/.test(s)?/(?=.*\d)/.test(s)?/(?=.*[@$!%*?&])/.test(s)?!0:"Password must contain at least one special character (@$!%*?&)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter":"Password is required",confirmPassword:s=>s===this.form.password||"Passwords must match"},errorMessage:""}},computed:{isFormValid(){return this.form.firstName&&this.rules.name(this.form.firstName)===!0&&this.form.lastName&&this.rules.name(this.form.lastName)===!0&&this.form.email&&this.rules.email(this.form.email)===!0&&this.form.username&&this.rules.username(this.form.username)===!0&&this.form.password&&this.rules.password(this.form.password)===!0&&this.form.confirmPassword&&this.rules.confirmPassword(this.form.confirmPassword)===!0}},methods:{async handleRegister(){var s,e;this.errorMessage="",this.loading=!0;try{await h.post("/api/auth/register",{firstName:this.form.firstName,lastName:this.form.lastName,email:this.form.email,username:this.form.username,password:this.form.password}),this.$router.push("/")}catch(n){this.errorMessage=((e=(s=n.response)==null?void 0:s.data)==null?void 0:e.message)||n.message||"Registration failed. Please try again."}finally{this.loading=!1}},async handleGoogleLogin(s){var n;const e=z(s.credential);console.log("Google user data:",e);try{const u=await h.post("/auth/google/register",e);localStorage.setItem("user",JSON.stringify(u.data)),this.$router.push("/")}catch(u){console.error("Google registration error:",((n=u.response)==null?void 0:n.data)||u.message)}}}},E={class:"text-center"},F={class:"text-center mt-4"};function B(s,e,n,u,r,d){const b=a("v-card-title"),i=a("v-text-field"),c=a("v-col"),p=a("v-row"),w=a("v-btn"),y=a("v-form"),v=a("v-divider"),V=a("GoogleLogin"),N=a("router-link"),x=a("v-icon"),P=a("v-alert"),q=a("v-card-text"),k=a("v-card"),C=a("v-container");return _(),g(C,null,{default:o(()=>[t(p,{justify:"center"},{default:o(()=>[t(c,{cols:"12",sm:"8",md:"6"},{default:o(()=>[t(k,{class:"mt-8"},{default:o(()=>[t(b,{class:"text-h4 text-center pt-6",id:"register-heading"},{default:o(()=>e[6]||(e[6]=[m(" Create Account ")])),_:1,__:[6]}),t(q,null,{default:o(()=>[t(y,{onSubmit:M(d.handleRegister,["prevent"]),"aria-labelledby":"register-heading"},{default:o(()=>[t(p,null,{default:o(()=>[t(c,{cols:"6"},{default:o(()=>[t(i,{modelValue:r.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=l=>r.form.firstName=l),label:"First Name",type:"text",required:"",rules:[r.rules.required,r.rules.name],"aria-label":"Enter your first name",autocomplete:"given-name"},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"6"},{default:o(()=>[t(i,{modelValue:r.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=l=>r.form.lastName=l),label:"Last Name",type:"text",required:"",rules:[r.rules.required,r.rules.name],"aria-label":"Enter your last name",autocomplete:"family-name"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(i,{modelValue:r.form.email,"onUpdate:modelValue":e[2]||(e[2]=l=>r.form.email=l),label:"Email",type:"email",required:"",rules:[r.rules.required,r.rules.email],"aria-describedby":"email-register-help",autocomplete:"email"},null,8,["modelValue","rules"]),t(i,{modelValue:r.form.username,"onUpdate:modelValue":e[3]||(e[3]=l=>r.form.username=l),label:"Username",type:"text",required:"",rules:[r.rules.required,r.rules.username],"aria-describedby":"username-help",autocomplete:"username"},null,8,["modelValue","rules"]),e[8]||(e[8]=m()),t(i,{modelValue:r.form.password,"onUpdate:modelValue":e[4]||(e[4]=l=>r.form.password=l),label:"Password",type:"password",required:"",rules:[r.rules.required,r.rules.password],"aria-describedby":"password-register-help",autocomplete:"new-password",hint:"Password must be at least 8 characters with uppercase, lowercase, number, and special character","persistent-hint":""},null,8,["modelValue","rules"]),t(i,{modelValue:r.form.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=l=>r.form.confirmPassword=l),label:"Confirm Password",type:"password",required:"",rules:[r.rules.required,r.rules.confirmPassword],"aria-describedby":"confirm-password-help",autocomplete:"new-password"},null,8,["modelValue","rules"]),t(w,{type:"submit",color:"primary",block:"",class:"mt-4",loading:r.loading,disabled:!d.isFormValid,style:R(d.isFormValid?"background-color: #43a047; color: #fff;":"background-color: #bdbdbd; color: #fff;"),"aria-label":r.loading?"Creating account...":"Create your account"},{default:o(()=>e[7]||(e[7]=[m(" Register ")])),_:1,__:[7]},8,["loading","disabled","style","aria-label"])]),_:1,__:[8]},8,["onSubmit"]),t(v,{class:"my-4","aria-hidden":"true"}),f("div",E,[e[9]||(e[9]=f("p",{class:"text-body-2 mb-2"},"Or register with",-1)),t(V,{callback:d.handleGoogleLogin,prompt:"","auto-login":""},null,8,["callback"])]),f("div",F,[t(N,{to:"/login",class:"text-decoration-none"},{default:o(()=>e[10]||(e[10]=[m(" Already have an account? Login ")])),_:1,__:[10]})]),r.errorMessage?(_(),g(P,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"},role:"alert","aria-live":"polite"},{prepend:o(()=>[t(x,{color:"error",size:"24","aria-hidden":"true"},{default:o(()=>e[11]||(e[11]=[m("mdi-alert-circle")])),_:1,__:[11]})]),default:o(()=>[m(" "+S(r.errorMessage),1)]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Z=U(A,[["render",B]]);export{Z as default};
