import{_ as P,C as k,f as c,o as p,w as o,a as t,r as a,d as i,g as U,b as C,k as M,t as R,q as A,e as _}from"./index-C8_jlxPL.js";const S={name:"RegisterComponent",components:{GoogleLogin:k},data(){return{loading:!1,form:{firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:""},rules:{required:r=>!!r||"This field is required",name:r=>r?r.length<2?"Name must be at least 2 characters":r.length>50?"Name must be less than 50 characters":/^[a-zA-Z\s'-]+$/.test(r)?!0:"Name can only contain letters, spaces, hyphens, and apostrophes":"This field is required",email:r=>/.+@.+\..+/.test(r)||"Email must be valid",username:r=>/^[a-zA-Z0-9_]{3,20}$/.test(r)||"Username must be 3-20 characters, letters, numbers, or underscores",password:r=>r?r.length<8?"Password must be at least 8 characters":/(?=.*[a-z])/.test(r)?/(?=.*[A-Z])/.test(r)?/(?=.*\d)/.test(r)?/(?=.*[@$!%*?&])/.test(r)?!0:"Password must contain at least one special character (@$!%*?&)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter":"Password is required",confirmPassword:r=>r===this.form.password||"Passwords must match"},errorMessage:""}},computed:{isFormValid(){return this.form.firstName&&this.rules.name(this.form.firstName)===!0&&this.form.lastName&&this.rules.name(this.form.lastName)===!0&&this.form.email&&this.rules.email(this.form.email)===!0&&this.form.username&&this.rules.username(this.form.username)===!0&&this.form.password&&this.rules.password(this.form.password)===!0&&this.form.confirmPassword&&this.rules.confirmPassword(this.form.confirmPassword)===!0}},methods:{async handleRegister(){var r,e;this.errorMessage="",this.loading=!0;try{await _.post("/api/auth/register",{firstName:this.form.firstName,lastName:this.form.lastName,email:this.form.email,username:this.form.username,password:this.form.password}),this.$router.push("/")}catch(n){this.errorMessage=((e=(r=n.response)==null?void 0:r.data)==null?void 0:e.message)||n.message||"Registration failed. Please try again."}finally{this.loading=!1}},async handleGoogleLogin(r){var n;const e=A(r.credential);console.log("Google user data:",e);try{const m=await _.post("/auth/google/register",e);localStorage.setItem("user",JSON.stringify(m.data)),this.$router.push("/")}catch(m){console.error("Google registration error:",((n=m.response)==null?void 0:n.data)||m.message)}}}},z={class:"mt-4 text-center"};function G(r,e,n,m,s,g){const h=a("v-card-title"),u=a("v-text-field"),d=a("v-col"),f=a("v-row"),w=a("v-btn"),b=a("v-form"),y=a("v-icon"),N=a("v-alert"),v=a("router-link"),V=a("v-card-text"),x=a("v-card"),q=a("v-container");return p(),c(q,null,{default:o(()=>[t(f,{justify:"center"},{default:o(()=>[t(d,{cols:"12",sm:"8",md:"6"},{default:o(()=>[t(x,{class:"mt-8"},{default:o(()=>[t(h,{class:"text-h4 text-center pt-6",id:"register-heading"},{default:o(()=>e[5]||(e[5]=[i("Create Account")])),_:1,__:[5]}),t(V,null,{default:o(()=>[t(b,{onSubmit:M(g.handleRegister,["prevent"]),"aria-labelledby":"register-heading"},{default:o(()=>[t(f,null,{default:o(()=>[t(d,{cols:"6"},{default:o(()=>[t(u,{modelValue:s.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=l=>s.form.firstName=l),label:"First Name",type:"text",required:"",rules:[s.rules.required,s.rules.name],autocomplete:"given-name"},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"6"},{default:o(()=>[t(u,{modelValue:s.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=l=>s.form.lastName=l),label:"Last Name",type:"text",required:"",rules:[s.rules.required,s.rules.name],autocomplete:"family-name"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(u,{modelValue:s.form.email,"onUpdate:modelValue":e[2]||(e[2]=l=>s.form.email=l),label:"Email",type:"email",required:"",rules:[s.rules.required,s.rules.email],autocomplete:"email"},null,8,["modelValue","rules"]),t(u,{modelValue:s.form.username,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form.username=l),label:"Username",type:"text",required:"",rules:[s.rules.required,s.rules.username],autocomplete:"username"},null,8,["modelValue","rules"]),t(u,{modelValue:s.form.password,"onUpdate:modelValue":e[4]||(e[4]=l=>s.form.password=l),label:"Password",type:"password",required:"",rules:[s.rules.required,s.rules.password],autocomplete:"new-password"},null,8,["modelValue","rules"]),t(w,{type:"submit",color:"primary",block:"",class:"mt-4",loading:s.loading},{default:o(()=>e[6]||(e[6]=[i("Register")])),_:1,__:[6]},8,["loading"])]),_:1},8,["onSubmit"]),s.errorMessage?(p(),c(N,{key:0,type:"error",class:"mt-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"},role:"alert","aria-live":"polite"},{prepend:o(()=>[t(y,{color:"error",size:"24","aria-hidden":"true"},{default:o(()=>e[7]||(e[7]=[i("mdi-alert-circle")])),_:1,__:[7]})]),default:o(()=>[i(R(s.errorMessage),1)]),_:1})):U("",!0),C("div",z,[e[9]||(e[9]=i("Already have an account? ")),t(v,{to:"/login"},{default:o(()=>e[8]||(e[8]=[i("Login")])),_:1,__:[8]})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const B=P(S,[["render",G]]);export{B as default};
