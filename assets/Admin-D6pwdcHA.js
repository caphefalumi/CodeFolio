import{_ as q,c,o as g,a as s,w as o,b as H,r as i,d as a,g as k,t as y,e as m}from"./index-BCuZNNsW.js";const T={name:"AdminDashboard",data(){return{tab:0,users:[],posts:[],userDialog:!1,postDialog:!1,editingUser:null,editingPost:null,userForm:{email:"",username:"",firstName:"",lastName:"",password:""},postForm:{title:"",description:"",githubUrl:"",type:"",tags:""},showPassword:!1,userSearch:"",postSearch:"",userHeaders:[{text:"Email",value:"email"},{text:"Username",value:"username"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Actions",value:"actions",sortable:!1}],postHeaders:[{text:"Title",value:"title"},{text:"Type",value:"type"},{text:"GitHub",value:"githubUrl"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{filteredUsers(){if(!this.userSearch)return this.users;const r=this.userSearch.toLowerCase();return this.users.filter(e=>{var p,f,t,n;return((p=e.email)==null?void 0:p.toLowerCase().includes(r))||((f=e.username)==null?void 0:f.toLowerCase().includes(r))||((t=e.firstName)==null?void 0:t.toLowerCase().includes(r))||((n=e.lastName)==null?void 0:n.toLowerCase().includes(r))})},filteredPosts(){if(!this.postSearch)return this.posts;const r=this.postSearch.toLowerCase();return this.posts.filter(e=>{var p,f,t;return((p=e.title)==null?void 0:p.toLowerCase().includes(r))||((f=e.description)==null?void 0:f.toLowerCase().includes(r))||((t=e.githubUrl)==null?void 0:t.toLowerCase().includes(r))||(Array.isArray(e.tags)?e.tags.join(",").toLowerCase().includes(r):!1)})}},mounted(){this.fetchUsers(),this.fetchPosts()},methods:{fetchUsers(){m.get("https://server-codefolio.vercel.app/api/users").then(r=>{this.users=r.data}).catch(()=>{})},fetchPosts(){m.get("https://server-codefolio.vercel.app/api/posts").then(r=>{this.posts=r.data}).catch(()=>{})},openUserDialog(){this.editingUser=null,this.userForm={email:"",username:"",firstName:"",lastName:"",password:""},this.userDialog=!0},editUser(r){this.editingUser=r,this.userForm={...r,password:""},this.userDialog=!0},saveUser(){this.editingUser?m.put(`https://server-codefolio.vercel.app/api/users/${this.editingUser._id}`,this.userForm).then(()=>{this.fetchUsers(),this.closeUserDialog()}):m.post("https://server-codefolio.vercel.app/api/users",this.userForm).then(()=>{this.fetchUsers(),this.closeUserDialog()})},deleteUser(r){confirm("Delete this user?")&&m.delete(`https://server-codefolio.vercel.app/api/users/${r._id}`).then(()=>this.fetchUsers())},closeUserDialog(){this.userDialog=!1},openPostDialog(){this.editingPost=null,this.postForm={title:"",description:"",githubUrl:"",type:"",tags:""},this.postDialog=!0},editPost(r){this.editingPost=r,this.postForm={...r},this.postDialog=!0},savePost(){this.editingPost?m.put(`https://server-codefolio.vercel.app/api/posts/${this.editingPost._id}`,this.postForm).then(()=>{this.fetchPosts(),this.closePostDialog()}):m.post("https://server-codefolio.vercel.app/api/posts",this.postForm).then(()=>{this.fetchPosts(),this.closePostDialog()})},deletePost(r){confirm("Delete this post?")&&m.delete(`https://server-codefolio.vercel.app/api/posts/${r._id}`).then(()=>this.fetchPosts())},closePostDialog(){this.postDialog=!1}}},E={key:0},B={key:0};function G(r,e,p,f,t,n){const U=i("v-tab"),N=i("v-tabs"),u=i("v-btn"),d=i("v-text-field"),v=i("v-icon"),V=i("v-data-table"),h=i("v-col"),b=i("v-row"),P=i("v-card-title"),C=i("v-card-text"),w=i("v-card-actions"),F=i("v-card"),D=i("v-dialog"),x=i("v-tab-item"),S=i("v-textarea"),L=i("v-tabs-items"),A=i("v-container");return g(),c("div",null,[s(A,null,{default:o(()=>[e[31]||(e[31]=H("h1",{class:"text-h4 mb-6"},"Admin Dashboard",-1)),s(N,{modelValue:t.tab,"onUpdate:modelValue":e[0]||(e[0]=l=>t.tab=l)},{default:o(()=>[s(U,null,{default:o(()=>e[19]||(e[19]=[a("Users")])),_:1,__:[19]}),s(U,null,{default:o(()=>e[20]||(e[20]=[a("Posts")])),_:1,__:[20]})]),_:1},8,["modelValue"]),s(L,{modelValue:t.tab,"onUpdate:modelValue":e[18]||(e[18]=l=>t.tab=l)},{default:o(()=>[s(x,null,{default:o(()=>[t.tab===0?(g(),c("div",E,[s(b,null,{default:o(()=>[s(h,{cols:"12"},{default:o(()=>[s(u,{color:"primary",class:"mb-4",onClick:e[1]||(e[1]=l=>n.openUserDialog())},{default:o(()=>e[21]||(e[21]=[a("Add User")])),_:1,__:[21]}),s(d,{modelValue:t.userSearch,"onUpdate:modelValue":e[2]||(e[2]=l=>t.userSearch=l),label:"Search users","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",class:"mb-4"},null,8,["modelValue"]),s(V,{headers:t.userHeaders,items:n.filteredUsers,"item-key":"_id",class:"elevation-1","items-per-page":10},{"item.actions":o(({item:l})=>[s(u,{icon:"",onClick:_=>n.editUser(l)},{default:o(()=>[s(v,null,{default:o(()=>e[22]||(e[22]=[a("mdi-pencil")])),_:1,__:[22]})]),_:2},1032,["onClick"]),s(u,{icon:"",onClick:_=>n.deleteUser(l)},{default:o(()=>[s(v,null,{default:o(()=>e[23]||(e[23]=[a("mdi-delete")])),_:1,__:[23]})]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1}),s(D,{modelValue:t.userDialog,"onUpdate:modelValue":e[9]||(e[9]=l=>t.userDialog=l),"max-width":"500px"},{default:o(()=>[s(F,null,{default:o(()=>[s(P,null,{default:o(()=>[a(y(t.editingUser?"Edit User":"Add User"),1)]),_:1}),s(C,null,{default:o(()=>[s(d,{modelValue:t.userForm.email,"onUpdate:modelValue":e[3]||(e[3]=l=>t.userForm.email=l),label:"Email",required:""},null,8,["modelValue"]),s(d,{modelValue:t.userForm.username,"onUpdate:modelValue":e[4]||(e[4]=l=>t.userForm.username=l),label:"Username",required:""},null,8,["modelValue"]),s(d,{modelValue:t.userForm.firstName,"onUpdate:modelValue":e[5]||(e[5]=l=>t.userForm.firstName=l),label:"First Name",required:""},null,8,["modelValue"]),s(d,{modelValue:t.userForm.lastName,"onUpdate:modelValue":e[6]||(e[6]=l=>t.userForm.lastName=l),label:"Last Name",required:""},null,8,["modelValue"]),s(d,{modelValue:t.userForm.password,"onUpdate:modelValue":e[7]||(e[7]=l=>t.userForm.password=l),label:"Password",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off","onClick:append":e[8]||(e[8]=l=>t.showPassword=!t.showPassword),required:!t.editingUser},null,8,["modelValue","type","append-icon","required"])]),_:1}),s(w,null,{default:o(()=>[s(u,{color:"primary",onClick:n.saveUser},{default:o(()=>e[24]||(e[24]=[a("Save")])),_:1,__:[24]},8,["onClick"]),s(u,{text:"",onClick:n.closeUserDialog},{default:o(()=>e[25]||(e[25]=[a("Cancel")])),_:1,__:[25]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):k("",!0)]),_:1}),s(x,null,{default:o(()=>[t.tab===1?(g(),c("div",B,[s(b,null,{default:o(()=>[s(h,{cols:"12"},{default:o(()=>[s(u,{color:"primary",class:"mb-4",onClick:e[10]||(e[10]=l=>n.openPostDialog())},{default:o(()=>e[26]||(e[26]=[a("Add Post")])),_:1,__:[26]}),s(d,{modelValue:t.postSearch,"onUpdate:modelValue":e[11]||(e[11]=l=>t.postSearch=l),label:"Search posts","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",class:"mb-4"},null,8,["modelValue"]),s(V,{headers:t.postHeaders,items:n.filteredPosts,"item-key":"_id",class:"elevation-1","items-per-page":10},{"item.actions":o(({item:l})=>[s(u,{icon:"",onClick:_=>n.editPost(l)},{default:o(()=>[s(v,null,{default:o(()=>e[27]||(e[27]=[a("mdi-pencil")])),_:1,__:[27]})]),_:2},1032,["onClick"]),s(u,{icon:"",onClick:_=>n.deletePost(l)},{default:o(()=>[s(v,null,{default:o(()=>e[28]||(e[28]=[a("mdi-delete")])),_:1,__:[28]})]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1}),s(D,{modelValue:t.postDialog,"onUpdate:modelValue":e[17]||(e[17]=l=>t.postDialog=l),"max-width":"600px"},{default:o(()=>[s(F,null,{default:o(()=>[s(P,null,{default:o(()=>[a(y(t.editingPost?"Edit Post":"Add Post"),1)]),_:1}),s(C,null,{default:o(()=>[s(d,{modelValue:t.postForm.title,"onUpdate:modelValue":e[12]||(e[12]=l=>t.postForm.title=l),label:"Title",required:""},null,8,["modelValue"]),s(S,{modelValue:t.postForm.description,"onUpdate:modelValue":e[13]||(e[13]=l=>t.postForm.description=l),label:"Description"},null,8,["modelValue"]),s(d,{modelValue:t.postForm.githubUrl,"onUpdate:modelValue":e[14]||(e[14]=l=>t.postForm.githubUrl=l),label:"GitHub URL"},null,8,["modelValue"]),s(d,{modelValue:t.postForm.type,"onUpdate:modelValue":e[15]||(e[15]=l=>t.postForm.type=l),label:"Type"},null,8,["modelValue"]),s(d,{modelValue:t.postForm.tags,"onUpdate:modelValue":e[16]||(e[16]=l=>t.postForm.tags=l),label:"Tags (comma separated)"},null,8,["modelValue"])]),_:1}),s(w,null,{default:o(()=>[s(u,{color:"primary",onClick:n.savePost},{default:o(()=>e[29]||(e[29]=[a("Save")])),_:1,__:[29]},8,["onClick"]),s(u,{text:"",onClick:n.closePostDialog},{default:o(()=>e[30]||(e[30]=[a("Cancel")])),_:1,__:[30]},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):k("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1,__:[31]})])}const I=q(T,[["render",G],["__scopeId","data-v-c559af1c"]]);export{I as default};
