import{_ as N,c as g,o as d,a as s,w as o,h as U,g as p,i as S,r,F as V,e as k,d as c,t as m,f as h,j as z,b as E}from"./index-DauhjLGg.js";const O={name:"ProjectsView",data(){return{projects:[],search:"",selectedType:"all",sortBy:"newest",page:1,itemsPerPage:6,projectTypes:[{title:"All Types",value:"all"},{title:"Web App",value:"web"},{title:"Mobile App",value:"mobile"},{title:"Game",value:"game"},{title:"Design",value:"design"}],sortOptions:[{title:"Newest First",value:"newest"},{title:"Most Liked",value:"liked"},{title:"Most Viewed",value:"viewed"}],errorMessage:""}},computed:{filteredProjects(){let e=this.projects;if(this.selectedType!=="all"&&(e=e.filter(t=>t.type===this.selectedType)),this.search)if(this.search.startsWith("#")){const t=this.search.slice(1).toLowerCase();e=e.filter(l=>Array.isArray(l.tags)&&l.tags.some(n=>n.toLowerCase().includes(t)))}else e=e.filter(t=>{var l;return t.title.toLowerCase().includes(this.search.toLowerCase())||((l=t.description)==null?void 0:l.toLowerCase().includes(this.search.toLowerCase()))});return this.sortBy==="newest"?e=e.sort((t,l)=>new Date(l.createdAt)-new Date(t.createdAt)):this.sortBy==="liked"?e=e.sort((t,l)=>(l.upvotes||0)-(t.upvotes||0)):this.sortBy==="viewed"&&(e=e.sort((t,l)=>(l.views||0)-(t.views||0))),e},totalPages(){return Math.ceil(this.filteredProjects.length/this.itemsPerPage)},paginatedProjects(){const e=(this.page-1)*this.itemsPerPage;return this.filteredProjects.slice(e,e+this.itemsPerPage)}},methods:{async toggleLike(e){var t,l;try{if(e.liked){const n=await h.post(`/api/posts/${e._id}/downvote`);e.downvotes=n.data.downvotes,e.liked=!1}else{const n=await h.post(`/api/posts/${e._id}/upvote`);e.upvotes=n.data.upvotes,e.liked=!0}}catch(n){this.errorMessage=((l=(t=n.response)==null?void 0:t.data)==null?void 0:l.message)||n.message||"Failed to update vote. Please try again."}},async handleCreatePost(){this.errorMessage="",this.loading=!0,this.loading=!1}},async mounted(){try{const e=await h.get("/api/posts/");this.projects=e.data,console.log("Projects:",this.projects)}catch(e){console.error("Error fetching projects:",e)}}};function W(e,t,l,n,i,_){const b=r("v-text-field"),u=r("v-col"),y=r("v-select"),v=r("v-row"),x=r("v-card-title"),C=r("v-chip"),B=r("v-card-text"),w=r("v-btn"),L=r("v-spacer"),P=r("v-icon"),M=r("v-card-actions"),T=r("v-card"),A=r("v-pagination"),D=r("v-alert"),F=r("v-container"),j=z("auto-animate");return d(),g("div",null,[s(F,null,{default:o(()=>[s(v,{class:"mb-6"},{default:o(()=>[s(u,{cols:"12",md:"6"},{default:o(()=>[s(b,{modelValue:i.search,"onUpdate:modelValue":t[0]||(t[0]=a=>i.search=a),label:"Search projects","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.selectedType,"onUpdate:modelValue":t[1]||(t[1]=a=>i.selectedType=a),items:i.projectTypes,"item-title":"title","item-value":"value",label:"Project Type",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1}),s(u,{cols:"12",md:"3"},{default:o(()=>[s(y,{modelValue:i.sortBy,"onUpdate:modelValue":t[2]||(t[2]=a=>i.sortBy=a),items:i.sortOptions,"item-title":"title","item-value":"value",label:"Sort By",variant:"outlined","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),U((d(),p(v,null,{default:o(()=>[(d(!0),g(V,null,k(_.paginatedProjects,a=>(d(),p(u,{key:a._id,cols:"12",md:"4"},{default:o(()=>[s(T,null,{default:o(()=>[s(x,null,{default:o(()=>[c(m(a.title),1)]),_:2},1024),s(B,null,{default:o(()=>[E("p",null,m(a.description),1),(d(!0),g(V,null,k(a.tags,f=>(d(),p(C,{key:f,class:"mr-2 mb-2",size:"small"},{default:o(()=>[c(m(f),1)]),_:2},1024))),128))]),_:2},1024),s(M,null,{default:o(()=>[s(w,{color:"primary",variant:"text",to:`${a.getFullPath}`,"prepend-icon":"mdi-eye"},{default:o(()=>t[4]||(t[4]=[c(" View Project ")])),_:2,__:[4]},1032,["to"]),s(L),s(w,{icon:"",onClick:f=>_.toggleLike(a)},{default:o(()=>[s(P,null,{default:o(()=>[c(m(a.liked?"mdi-heart":"mdi-heart-outline"),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})),[[j]]),s(v,{class:"mt-6"},{default:o(()=>[s(u,{cols:"12",class:"text-center"},{default:o(()=>[s(A,{modelValue:i.page,"onUpdate:modelValue":t[3]||(t[3]=a=>i.page=a),length:_.totalPages,rounded:""},null,8,["modelValue","length"])]),_:1})]),_:1}),i.errorMessage?(d(),p(D,{key:0,type:"error",class:"mb-4",border:"start","colored-border":"",elevation:"0",density:"comfortable",style:{"background-color":"#fff",color:"#d32f2f","font-weight":"500"}},{prepend:o(()=>[s(P,{color:"error",size:"24"},{default:o(()=>t[5]||(t[5]=[c("mdi-alert-circle")])),_:1,__:[5]})]),default:o(()=>[c(" "+m(i.errorMessage),1)]),_:1})):S("",!0)]),_:1})])}const Q=N(O,[["render",W]]);export{Q as default};
